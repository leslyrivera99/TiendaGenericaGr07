<%- include('../template/header', {pagina:'Reporte Ventas'}) %>
<%- include('../template/navbar') %>
<h1 align="center" class="text-white bg-dark">Reportes</h1>
<div class="p-3 mb-2 bg-info text-dark bg-opacity-10">
    <h2>GeneraciÃ³n de reportes</h2>
    <br />
    <hr />
    <hr />
    <div class="container">
        <div class="row justify-content-md-center">
            <div class="col-md-auto">
                <a href="RClientes" class="btn btn-outline-dark">---__ Listado de Clientes __---</a>
            </div>
            <div class="col-md-auto">
                <a href="RVentas" class="btn btn-outline-dark">---__ Ventas por Cliente __---</a>
            </div>
        </div>
        <hr />
    </div>
    <br />
    <h3>Total Ventas por Cliente</h3>
    <hr />
    <div class="col-md-auto" id="div1">
        <div class="container">
            <table class="table table-dark table-sm">
                <thead>
                    <tr>
                        <th class="text-center" scope="col">Cedula Cliente</th>
                        <th class="text-center" scope="col">Nombre Cliente</th>
                        <th class="text-center" scope="col">Valor Total Ventas</th>
                    </tr>
                </thead>
                <tbody>
                    <% if (reporte.length > 0) { %>
                        <% var total = 0 %>
                        <% reporte.forEach(venta => { %>
                            <tr>
                                <th class="text-center" scope="row"><%=venta.cedula_cliente %></th>
                                <td class="text-center"><%=venta.nombre_cliente %></td>
                                <td class="text-center"><%=venta.valor_total%></td>
                                <% total = total + Number(venta.valor_total)%>
                            </tr>
                        <% }) %>
                    <% } %>
                    <tr>
                        <th class="align-middle" scope="row"></th>
                        <td class="align-middle"> </td>
                        <td class="align-middle"> </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <br />
        <div class="container">
            <div class="row justify-content-md-center">
                <div class="col-md-auto">
                    <h4>Total Ventas Clientes $</h4>
                </div>
                <div class="col-md-auto">
                    <input type="number" disabled="disabled" name="total ventas" class="form-control" value="<%=total%>">
                </div>
            </div>
        </div>
    </div>
    <br />


<%- include('../template/footer') %>